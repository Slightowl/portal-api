<app-cwp-loading-overlay [show]="props.loading || !props.formRendered"></app-cwp-loading-overlay>

<div *ngIf="!props.loading && !props.isComplete" class="container flex-grow-1">

  <div *ngIf="!props.loading && props.form">
    <form-renderer
      [formMetadata]="props.form.formMetadata"
      [resourceUrl]="props.form.resourceUrl"
      [credentials]="props.form.credentials"
      [context]="props.form.context"
      [compositionId]="props.form.compositionId"
      [formEnvironment]="props.environment"
      (onFormRendered)="formRendered($event)"
      (onPageChanged)="pageChange($event)"
      (onCompositionSaved)="handleSavedComposition($event)"
    >
    </form-renderer>
  </div>

</div>

<!-- error modal -->
<app-error-modal [show]="props.showError" (retry)="hideError()"></app-error-modal>

<!-- post submission -->
<div *ngIf="props.isComplete" class="container">
  <h3>Thank you.</h3>

  <div class="text">
    Your form has been submitted successfully.
  </div>

  <div class="text">
    You can use the links below to view forms you have completed previously, or go back to your home page.
  </div>

  <div class="d-flex">
    <a class="btn btn-primary w-100 me-3" routerLink="/">
      Home page
    </a>
    <a class="btn btn-primary w-100" routerLink="/forms">
      My Forms
    </a>
  </div>
</div>